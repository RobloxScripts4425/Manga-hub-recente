-- Carregar biblioteca Orion
local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/shlexware/Orion/main/source"))()

-- Criar a interface sem atalho
local Window = OrionLib:MakeWindow({Name = "Manga Hub 4.2.1", HidePremium = true})

-- Função para criar a aba de jogador
local PlayerTab = Window:MakeTab({
    Name = "Jogador",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Função para criar a aba de troll
local TrollTab = Window:MakeTab({
    Name = "Troll",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Variáveis para controle de fling
local flingConnection
local flingSpeed = 1945
local teleportDistance = 120
local teleportDelay = 0.2
local playerName
local originalJumpPower
local originalWalkSpeed

-- Função para iniciar o fling
local function startFling(playerIdentifier)
    if playerIdentifier == "" then
        print("Por favor, insira o nick do jogador.")
        return
    end

    local targetPlayer = game.Players:FindFirstChild(playerIdentifier)
    if not targetPlayer then
        for _, p in ipairs(game.Players:GetPlayers()) do
            if p.DisplayName:lower():sub(1, #playerIdentifier:lower()) == playerIdentifier:lower() then
                targetPlayer = p
                break
            end
        end
    end

    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local localPlayer = game.Players.LocalPlayer
        local localHRP = localPlayer.Character:FindFirstChild("HumanoidRootPart")
        local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        local humanoid = targetPlayer.Character:FindFirstChildOfClass("Humanoid")

        if localHRP and targetHRP and humanoid then
            local function fling()
                local offset = targetHRP.CFrame.LookVector * -2.5
                local positionBehind = targetHRP.Position + offset
                localHRP.CFrame = CFrame.new(positionBehind, targetHRP.Position)
                localHRP.Velocity = (targetHRP.Position - localHRP.Position).unit * flingSpeed
            end

            local function teleport()
                local lastTeleportTime = tick()
                local lastPosition = localHRP.Position
                while targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") do
                    if humanoid.MoveDirection.Magnitude > 0 or humanoid.Jump then
                        local currentTime = tick()
                        if currentTime - lastTeleportTime >= teleportDelay then
                            local targetPosition = targetHRP.Position
                            localHRP.CFrame = CFrame.new(targetPosition + targetHRP.CFrame.LookVector * -teleportDistance, targetPosition)
                            wait(teleportDelay)
                            localHRP.CFrame = CFrame.new(targetPosition + targetHRP.CFrame.LookVector * teleportDistance, targetPosition)
                            lastTeleportTime = currentTime
                        end
                        wait(teleportDelay)
                    else
                        localHRP.CFrame = CFrame.new(lastPosition)
                        wait(0.1)
                    end
                end
            end

            flingConnection = game:GetService("RunService").Heartbeat:Connect(function()
                if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    fling()
                    teleport()
                end
            end)
            print("Fling iniciado no jogador: " .. targetPlayer.DisplayName)
        else
            print("HumanoidRootPart do jogador alvo não encontrado.")
        end
    else
        print("Jogador alvo não encontrado.")
    end
end

-- Função para parar o fling
local function stopFling()
    if flingConnection then
        flingConnection:Disconnect()
        flingConnection = nil
        print("Fling parado.")
    else
        print("Nenhum fling ativo para parar.")
    end
end

-- Adicionar controles na aba Jogador
PlayerTab:AddTextbox({
    Name = "Nome do Jogador",
    Callback = function(value)
        playerName = value
    end    
})

PlayerTab:AddButton({
    Name = "Iniciar Fling",
    Callback = function()
        if playerName and playerName ~= "" then
            startFling(playerName)
        else
            print("Por favor, insira o nome do jogador.")
        end
    end    
})

PlayerTab:AddButton({
    Name = "Parar Fling",
    Callback = function()
        stopFling()
    end    
})

-- Função para Anti-Sit
local antiSitEnabled = false
local antiSitConnection

PlayerTab:AddToggle({
    Name = "Anti-Sit",
    Default = false,
    Callback = function(enabled)
        antiSitEnabled = enabled

        if antiSitEnabled then
            local function preventSitting()
                local player = game.Players.LocalPlayer
                local character = player.Character
                if character and character:FindFirstChild("Humanoid") then
                    local humanoid = character.Humanoid
                    humanoid.SittingChanged:Connect(function(isSitting)
                        if isSitting then
                            humanoid:ChangeState(Enum.HumanoidStateType.Seated)
                            print("Anti-Sit ativado. Sentar foi evitado.")
                        end
                    end)
                end
            end
            preventSitting()
            print("Anti-Sit ativado.")
        else
            if antiSitConnection then
                antiSitConnection:Disconnect()
                antiSitConnection = nil
                print("Anti-Sit desativado.")
            end
        end
    end    
})

-- Função para ESP
local function addEspToPlayer(player)
    if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local hrp = player.Character.HumanoidRootPart
        local displayName = player.DisplayName
        local accountAge = player.AccountAge

        -- Create BillboardGui for account age
        local ageGui = Instance.new("BillboardGui")
        ageGui.Adornee = hrp
        ageGui.Size = UDim2.new(0, 200, 0, 50)
        ageGui.StudsOffset = Vector3.new(0, 3, 0)
        ageGui.Parent = hrp

        local ageLabel = Instance.new("TextLabel")
        ageLabel.Size = UDim2.new(1, 0, 1, 0)
        ageLabel.BackgroundTransparency = 1
        ageLabel.Text = "Idade da Conta: " .. accountAge
        ageLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        ageLabel.TextStrokeTransparency = 0.8
        ageLabel.Parent = ageGui

        -- Create BillboardGui for display name
        local nameGui = Instance.new("BillboardGui")
        nameGui.Adornee = hrp
        nameGui.Size = UDim2.new(0, 200, 0, 50)
        nameGui.StudsOffset = Vector3.new(0, 1.5, 0)
        nameGui.Parent = hrp

        local nameLabel = Instance.new("TextLabel")
        nameLabel.Size = UDim2.new(1, 0, 1, 0)
        nameLabel.BackgroundTransparency = 1
        nameLabel.Text = "Nome: " .. displayName
        nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        nameLabel.TextStrokeTransparency = 0.8
        nameLabel.Parent = nameGui
    end
end

-- Adicionar botão ESP
PlayerTab:AddButton({
    Name = "ESP",
    Callback = function()
        -- Apply ESP to all players currently in the game
        for _, player in ipairs(game.Players:GetPlayers()) do
            addEspToPlayer(player)
        end

        -- Apply ESP to new players that join the game
        game.Players.PlayerAdded:Connect(addEspToPlayer)
    end    
})

-- Função para aumentar a saúde
PlayerTab:AddButton({
    Name = "+10 Saúde",
    Callback = function()
        local player = game.Players.LocalPlayer
        local character = player.Character
        if character and character:FindFirstChildOfClass("Humanoid") then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            humanoid.Health = humanoid.Health + 10
            print("Saúde aumentada em 10.")
        else
            print("Humanoide não encontrado no personagem.")
        end
    end    
})

-- Função para clonar itens
PlayerTab:AddButton({
    Name = "Clonar Itens",
    Callback = function()
        local player = game.Players.LocalPlayer
        if player and player.Backpack then
            -- Clona todos os itens no Backpack do jogador
            for _, item in ipairs(player.Backpack:GetChildren()) do
                if item:IsA("Tool") then
                    -- Clona o item
                    local clonedItem = item:Clone()
                    clonedItem.Parent = player.Backpack
                    print("Item " .. item.Name .. " clonado e adicionado ao inventário.")
                end
            end
        else
            print("Jogador não encontrado ou Backpack não disponível.")
        end
    end    
})

-- Função para adicionar Tp Tool
PlayerTab:AddButton({
    Name = "Tp Tool",
    Callback = function()
        local player = game.Players.LocalPlayer
        local backpack = player.Backpack

        -- Criar o item tptool
        local tpTool = Instance.new("Tool")
        tpTool.Name = "Teleport Tool"
        tpTool.RequiresHandle = true
        tpTool.CanBeDropped = false
        tpTool.Parent = backpack

        local handle = Instance.new("Part")
        handle.Name = "Handle"
        handle.Size = Vector3.new(1, 1, 1)
        handle.Parent = tpTool

        tpTool.Activated:Connect(function()
            -- Teleporte o jogador para a posição do mouse
            local mouse = player:GetMouse()
            local targetPosition = mouse.Hit.Position
            player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
            print("Jogador teleportado para a posição do mouse.")
        end)

        print("Tp Tool adicionada ao inventário.")
    end    
})

-- Função para aumentar o pulo
local function increaseJumpPower()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if character and character:FindFirstChildOfClass("Humanoid") then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if not originalJumpPower then
            originalJumpPower = humanoid.JumpPower
        end
        humanoid.JumpPower = humanoid.JumpPower + 30
        print("Pulo aumentado em 30.")
    else
        print("Humanoide não encontrado no personagem.")
    end
end

-- Função para resetar pulo e velocidade
local function resetJumpPowerAndSpeed()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if character and character:FindFirstChildOfClass("Humanoid") then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if originalJumpPower then
            humanoid.JumpPower = originalJumpPower
            originalJumpPower = nil
            print("Pulo e velocidade resetados ao normal.")
        else
            print("Pulo já está no valor normal.")
        end
    else
        print("Humanoide não encontrado no personagem.")
    end
end

-- Adicionar botões para aumentar pulo e resetar pulo e velocidade
PlayerTab:AddButton({
    Name = "+30 Pulo",
    Callback = function()
        increaseJumpPower()
    end    
})

PlayerTab:AddButton({
    Name = "Pulo e Velocidade Normal",
    Callback = function()
        resetJumpPowerAndSpeed()
    end    
})

-- Atualizar janela
OrionLib:Init()
